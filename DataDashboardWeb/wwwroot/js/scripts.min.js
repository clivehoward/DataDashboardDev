function SetTopicNavigation(n){$("#navDropdownSelected").html(n+'&nbsp;<span class="caret"><\/span>');$(".dropdown").addClass("active")}function SetDataDropdown(n){$("#viewDataDropdown").html(n+'&nbsp;<span class="caret"><\/span>')}function DownloadChartAsImage(n,t,i,r,u){return document.getElementById("chart1Legend")?html2canvas(document.getElementById("chart1Legend")).then(function(f){CreateDownloadChartImage(n,t,i,r,u,f)}):CreateDownloadChartImage(n,t,i,r,u,null),!1}function CreateDownloadChartImage(n,t,i,r,u,f){var a=null,h,o,e;f!=null?a=f:(i=0,r=0);var c=n,l=t,v=20;i>500?l=l+r+v:c=c+i;h=document.createElement("canvas");h.height=l;h.width=c;o=h.getContext("2d");o.fillStyle="white";o.fillRect(0,0,c,l);var w=$('canvas[id^="chart"]'),y=w.length,b=n/y,p=t,s=0;y>1&&(s=50,p=p-s);$.each(w,function(n){var t=n*b,u="chart"+(n+1),i=document.getElementById(u),r;y>1&&(r=$($(i).parent().parent().children()[0]).text(),o.font="20px Arial",o.fillStyle="black",o.fillText(r,t,30));o.drawImage(i,t,s,b-v,p)});a!=null&&(i>500?(s=t+v,left=0):(s=0,left=n),o.drawImage(a,left,s,i,r));e=u;e=e.replace(/[^a-z0-9\s]/gi,"");e=e.replace(/ /g,"_");e=e.toLowerCase();e=e+"_chart.png";h.toBlob(function(n){saveAs(n,e)})}function DownloadDataAsImage(n){var r=$(".sorting"),t,i;return r.each(function(){$(this).removeClass("sorting")}),t=$(".sorting_asc"),t.each(function(){$(this).removeClass("sorting_asc")}),i=$(".sorting_desc"),i.each(function(){$(this).removeClass("sorting_desc")}),html2canvas(document.getElementById("allDataTable")).then(function(u){var s=$(document.getElementById("allDataTable")).parent().width(),h=$(document.getElementById("allDataTable")).parent().height(),e=document.createElement("canvas"),o,f;e.height=h;e.width=s;o=e.getContext("2d");o.fillStyle="white";o.fillRect(0,0,s,h);o.drawImage(u,0,0,s,h);f=n;f=f.replace(/[^a-z0-9\s]/gi,"");f=f.replace(/ /g,"_");f=f.toLowerCase();f=f+"_data.png";e.toBlob(function(n){saveAs(n,f)});r.each(function(){$(this).addClass("sorting")});t.each(function(){$(this).addClass("sorting_asc")});i.each(function(){$(this).addClass("sorting_desc")})}),!1}function ChartAnimationComplete(){chartBuildComplete==!1&&$("#btnDownloadOptions").removeClass("disabled");chartBuildComplete=!0}$(function(){var n="/ApplyFilters";$("#launchFilters").click(function(){$(".filters-modal").load(n,function(){$("#filtersModal").modal({show:!0})})})});HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(n,t,i){var r=this;setTimeout(function(){for(var f=atob(r.toDataURL(t,i).split(",")[1]),e=f.length,o=new Uint8Array(e),u=0;u<e;u++)o[u]=f.charCodeAt(u);n(new Blob([o],{type:t||"image/png"}))})}});var chartBuildComplete=!1;